## Global settings

# DNS listen address (required).
listen: 127.0.0.1:5657

# HTTP server listen address. Omit or leave empty to disable the HTTP server.
http_listen: 127.0.0.1:8080

# Record refresh interval (Go duration).
interval: 10m

# Max parallel IP checks across all domains.
# max_workers: 50

## Domain settings
domains:
  - domain: "access.sub.chatgpt.com." # FQDN (note trailing dot) This is the domain that will be resolved. ideally NS records of parent should point to the server running this service.
    sni: "chatgpt.com"                # TLS SNI / HTTP Host, this is the domain that will be used in TLS and HTTP checks. It can be different from the resolved domain, for example to target a specific CDN hostname.
    cidr: # Defaults to Cloudflare IP ranges if not specified
      - "173.245.48.0/20"
      - "103.21.244.0/22"
      - "103.22.200.0/22"
      - "103.31.4.0/22"
      - "141.101.64.0/18"
      - "108.162.192.0/18"
      - "190.93.240.0/20"
      - "188.114.96.0/20"
      - "197.234.240.0/22"
      - "198.41.128.0/17"
      - "162.158.0.0/15"
      - "104.16.0.0/13"
      - "104.24.0.0/14"
      - "172.64.0.0/13"
      - "131.0.72.0/22"
    # timeout: 200000000 # per IP check in nanoseconds (200ms)
    # port: 443          # port to test against
    # path: "/"          # HTTP path for status check
    # status_code: 200   # expected HTTP status (0 disables HTTP check)
    # http_only: false   # use HTTP-only check instead of TLS+SNI
    # result_limit: 4    # max accepted IPs kept for this domain

    # These configs are experimental and optional, used for sampling candidate IP.
    # sample_min: 0      # minimum samples per CIDR
    # sample_max: 16     # maximum samples per CIDR
    # sample_chance: 0.05 # sampling probability per candidate IP

    # program: |         # optional custom Mithra program template
    #   tls.connect port={{ .Port }} sni={{ .SNI }} timeout={{ .Timeout }}
    #   tls.http.get header.host={{ .SNI }} path={{ .Path }} expect.status={{ .StatusCode }}
